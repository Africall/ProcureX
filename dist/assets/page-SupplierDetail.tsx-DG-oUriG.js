const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Chart-D9rTd4w_.js","assets/vendor-react-BNOq7jpD.js","assets/vendor-CLxS_-q2.js","assets/vendor-BqTUOKJh.css","assets/vendor-state-CYpoUhNr.js","assets/vendor-tanstack-COsLTYUz.js"])))=>i.map(i=>d[i]);
import{a as e,u as i,j as a,L as s,R as t}from"./vendor-react-BNOq7jpD.js";import{a as r}from"./page-Dashboard.tsx-L6v4uEnz.js";import{m as n}from"./vendor-framer-DlQFOBKq.js";const d={},l=function(e,i,a){let s=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");s=Promise.allSettled(i.map(e=>{if((e=function(e){return"/"+e}(e))in d)return;d[e]=!0;const i=e.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const t=document.createElement("link");return t.rel=i?"stylesheet":"modulepreload",i||(t.as="script"),t.crossOrigin="",t.href=e,a&&t.setAttribute("nonce",a),document.head.appendChild(t),i?new Promise((i,a)=>{t.addEventListener("load",i),t.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function t(e){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=e,window.dispatchEvent(i),!i.defaultPrevented)throw e}return s.then(i=>{for(const e of i||[])"rejected"===e.status&&t(e.reason);return e().catch(t)})},c=t.lazy(()=>l(()=>import("./Chart-D9rTd4w_.js"),__vite__mapDeps([0,1,2,3,4,5])));function o({risk:e}){const i=e<20?"#16a34a":e<40?"#22c55e":e<60?"#f59e0b":e<80?"#f97316":"#ef4444";return a.jsxs("span",{style:{background:i,color:"#fff",padding:"4px 8px",borderRadius:999,fontSize:12},children:["Risk ",Math.round(e),"%"]})}const h=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:d}=e(),l=Number(d),h=i({queryKey:["supplier",l],queryFn:async()=>(await r.get(`/suppliers/${l}`)).data,enabled:Number.isFinite(l)}),p=i({queryKey:["supplier-insights",l],queryFn:async()=>(await r.get(`/suppliers/${l}/insights`)).data,enabled:Number.isFinite(l),retry:0}),u=i({queryKey:["supplier-metrics",l],queryFn:async()=>(await r.get(`/suppliers/${l}/metrics`)).data,enabled:Number.isFinite(l)}),m=i({queryKey:["supplier-timeline",l],queryFn:async()=>(await r.get(`/suppliers/${l}/timeline`)).data,enabled:Number.isFinite(l)}),y=i({queryKey:["supplier-attachments",l],queryFn:async()=>(await r.get(`/suppliers/${l}/attachments`)).data,enabled:Number.isFinite(l)});if(h.isLoading)return a.jsx("div",{children:"Loading supplier..."});if(h.isError||!h.data)return a.jsx("div",{children:"Supplier not found"});const f=h.data;return a.jsxs("div",{children:[a.jsxs("div",{className:"toolbar",children:[a.jsxs("h2",{children:["Supplier: ",f.name]}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx(s,{to:"/suppliers",className:"btn-secondary",children:"Back"}),p.data&&a.jsx(o,{risk:100*p.data.deliveryRisk})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[a.jsxs(n.div,{className:"card",style:{background:"#fff",padding:16,borderRadius:8},initial:{opacity:0,y:12},animate:{opacity:1,y:0},children:[a.jsx("h3",{children:"Profile"}),a.jsxs("div",{children:[a.jsx("b",{children:"Contact:"})," ",f.contactName||"-"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Email:"})," ",f.email||"-"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Phone:"})," ",f.phone||"-"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Address:"})," ",f.address||"-"]})]}),a.jsxs(n.div,{className:"card",style:{background:"#fff",padding:16,borderRadius:8},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.05},children:[a.jsx("h3",{children:"Predictive Insights"}),p.isLoading?a.jsx("div",{children:"Loading insights..."}):p.isError?a.jsx("div",{style:{color:"#ef4444",fontSize:13},children:"Insights unavailable"}):p.data?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[a.jsx(o,{risk:100*p.data.deliveryRisk}),a.jsxs("div",{children:["Lead time: ",a.jsxs("b",{children:[p.data.leadTimeDays," days"]})]}),a.jsxs("div",{children:["Quality forecast: ",a.jsxs("b",{children:[Math.round(100*p.data.qualityForecast),"%"]})]})]}),a.jsx("p",{style:{marginTop:8,color:"#334155",fontSize:14},children:p.data.notes})]}):null]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16,marginTop:16},children:[a.jsxs(n.div,{className:"card",style:{background:"#fff",padding:16,borderRadius:8},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.1},children:[a.jsx("h3",{children:"Performance (12 months)"}),u.isLoading?a.jsx("div",{children:"Loading metrics..."}):u.isError?a.jsx("div",{style:{color:"#ef4444"},children:"Metrics unavailable"}):u.data?a.jsx(t.Suspense,{fallback:a.jsx("div",{children:"Loading chart…"}),children:a.jsx(c,{labels:u.data.months.map(e=>e.month.slice(5)),series:[{label:"On-time",stroke:"#16a34a",values:u.data.months.map(e=>Math.round(100*e.onTimeRate))},{label:"Defect (inv)",stroke:"#ef4444",values:u.data.months.map(e=>Math.round(100*(1-e.defectRate)))}],height:220})}):null]}),a.jsxs(n.div,{className:"card",style:{background:"#fff",padding:16,borderRadius:8},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.15},children:[a.jsx("h3",{children:"Recent Activity"}),m.data?a.jsx("ul",{style:{paddingLeft:16},children:m.data.events.map((e,i)=>a.jsxs("li",{style:{margin:"6px 0"},children:[a.jsx("span",{style:{fontSize:12,color:"#64748b"},children:e.date})," — ",e.text]},i))}):a.jsx("div",{children:"Loading timeline..."})]})]}),a.jsxs(n.div,{className:"card",style:{background:"#fff",padding:16,borderRadius:8,marginTop:16},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.2},children:[a.jsx("h3",{children:"Attachments"}),y.data?a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Uploaded"})]})}),a.jsx("tbody",{children:y.data.attachments.map((e,i)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("a",{href:e.url,children:e.name})}),a.jsx("td",{children:e.uploadedAt})]},i))})]}):a.jsx("div",{children:"Loading attachments..."})]})]})}},Symbol.toStringTag,{value:"Module"}));export{h as S,l as _};
