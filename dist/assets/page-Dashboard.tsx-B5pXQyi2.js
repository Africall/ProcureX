import{c as e,u as t,r as s,j as i}from"./vendor-react-BNOq7jpD.js";import{p as a}from"./vendor-state-CYpoUhNr.js";import{a as r}from"./vendor-CLxS_-q2.js";import{R as n,A as o,C as d,X as l,Y as c,T as p,a as h}from"./vendor-charts-CFQ85YVe.js";const x={dateRange:{from:new Date(Date.now()-2592e6).toISOString(),to:(new Date).toISOString()}},y={kpis:{id:"kpis",type:"kpi",title:"Key Performance Indicators",position:{x:0,y:0,w:12,h:2},visible:!0,config:{showSparklines:!0,showTrends:!0}},lowStock:{id:"lowStock",type:"lowStock",title:"Low Stock Alert",position:{x:0,y:2,w:6,h:4},visible:!0,config:{showHeatmap:!0,maxItems:10}},poPipeline:{id:"poPipeline",type:"pipeline",title:"PO Pipeline",position:{x:6,y:2,w:6,h:4},visible:!0,config:{showCounts:!0,showMiniKanban:!1}},techUsage:{id:"techUsage",type:"usage",title:"Technician Usage",position:{x:0,y:6,w:6,h:4},visible:!0,config:{chartType:"bar",showCategories:!0}},supplierPerf:{id:"supplierPerf",type:"suppliers",title:"Supplier Performance",position:{x:6,y:6,w:6,h:4},visible:!0,config:{showCharts:!0,maxSuppliers:5}},alerts:{id:"alerts",type:"alerts",title:"Alerts Center",position:{x:0,y:10,w:4,h:6},visible:!0,config:{showAcknowledged:!1,maxAlerts:10}},activity:{id:"activity",type:"activity",title:"Recent Activity",position:{x:4,y:10,w:4,h:6},visible:!0,config:{showDetails:!0,maxItems:15}},predictive:{id:"predictive",type:"predictive",title:"Predictive Insights",position:{x:8,y:10,w:4,h:6},visible:!0,config:{minConfidence:70,showActions:!0}}},u=Object.values(y).map(e=>({i:e.id,x:e.position.x,y:e.position.y,w:e.position.w,h:e.position.h,minW:2,minH:2})),f=e()(a((e,t)=>({filters:x,setFilters:t=>e(e=>({filters:{...e.filters,...t}})),resetFilters:()=>e({filters:x}),layouts:{lg:u,md:u,sm:u,xs:u,xxs:u},setLayout:(t,s)=>e(e=>({layouts:{...e.layouts,[t]:s}})),widgets:y,updateWidget:(t,s)=>e(e=>({widgets:{...e.widgets,[t]:{...e.widgets[t],...s}}})),addWidget:t=>e(e=>({widgets:{...e.widgets,[t.id]:t}})),removeWidget:t=>e(e=>{const s={...e.widgets};return delete s[t],{widgets:s}}),savedLayouts:[{id:"default",name:"Default Layout",description:"Standard operational dashboard",layout:u,widgets:Object.keys(y),createdAt:new Date,isDefault:!0}],saveLayout:(s,i)=>{const{layouts:a,widgets:r}=t(),n={id:`layout-${Date.now()}`,name:s,description:i,layout:a.lg,widgets:Object.keys(r),createdAt:new Date,isDefault:!1};e(e=>({savedLayouts:[...e.savedLayouts,n]}))},loadLayout:s=>{const{savedLayouts:i}=t(),a=i.find(e=>e.id===s);a&&e({layouts:{lg:a.layout,md:a.layout,sm:a.layout,xs:a.layout,xxs:a.layout}})},deleteLayout:t=>e(e=>({savedLayouts:e.savedLayouts.filter(e=>e.id!==t)})),isCustomizing:!1,setCustomizing:t=>e({isCustomizing:t}),showGrid:!1,setShowGrid:t=>e({showGrid:t}),lastRefresh:null,setLastRefresh:t=>e({lastRefresh:t}),autoRefresh:!0,setAutoRefresh:t=>e({autoRefresh:t}),resetLayout:()=>{const t={id:"default",name:"Default Layout",description:"Standard operational dashboard",layout:u,widgets:Object.keys(y),createdAt:new Date,isDefault:!0};try{localStorage.removeItem("dashboard-store")}catch{}e({filters:x,layouts:{lg:u,md:u,sm:u,xs:u,xxs:u},widgets:y,savedLayouts:[t],isCustomizing:!1,showGrid:!1,lastRefresh:null,autoRefresh:!0})}}),{name:"dashboard-store",version:2,migrate:(e,t)=>{const s=e=>Array.isArray(e)&&e.every(e=>e&&"string"==typeof e.i&&Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.w)&&Number.isFinite(e.h)),i=e=>s(e)?e:u,a=e?.layouts||{},r=s(a?.lg)?a.lg:u,n={lg:i(a?.lg||r),md:i(a?.md||r),sm:i(a?.sm||r),xs:i(a?.xs||r),xxs:i(a?.xxs||r)};return{...e,layouts:n}},partialize:e=>({filters:e.filters,layouts:e.layouts,widgets:e.widgets,savedLayouts:e.savedLayouts,autoRefresh:e.autoRefresh})}));let g=()=>{};function m(e){g=e}function b(e,t="Request failed"){const s="ECONNABORTED"===e?.code?"Request timed out. Please check your connection.":e?.message?.includes("Network Error")?"Network error. Is the server running?":e?.response?.data?.error||e?.message||t;g(s,"error")}function v(e){g(e,"success")}const j=r.create({baseURL:"http://127.0.0.1:4001/api",withCredentials:!0,timeout:1e4});j.interceptors.request.use(e=>{const t=(e.method||"get").toUpperCase();return["GET","HEAD","OPTIONS"].includes(t)||(e.headers=e.headers||{},e.headers["X-CSRF-Token"]=function(){if("undefined"==typeof document)return"";const e=document.cookie.split(";").map(e=>e.trim()).find(e=>e.startsWith("csrf_token="));return e?decodeURIComponent(e.split("=")[1]):""}()),e}),j.interceptors.response.use(e=>e,e=>("ECONNREFUSED"===e.code||e.message?.includes("Network Error")?b(new Error("Cannot reach API service. Please ensure the backend is running.")):b(e),Promise.reject(e)));const w=e=>j.post("/items",e),S=(e,t)=>j.put(`/items/${e}`,t),k=e=>j.delete(`/items/${e}`),R=e=>j.get("/items",{params:e}),z=()=>j.get("/finance/accounts"),C=()=>j.get("/finance/tax-rates"),T=e=>j.get("/finance/counterparties",{params:e?{type:e}:{}}),D=e=>j.get("/finance/invoices",{params:e}),P=e=>j.post("/finance/invoices",e),I=e=>j.get("/finance/bills",{params:e}),W=e=>j.post("/finance/bills",e),A=(e,t)=>j.post(`/finance/bills/${e}/record-payment`,t),L=e=>j.get("/finance/payments",{params:e}),N=e=>j.post("/finance/payments",e),B=()=>j.get("/finance/reports/kpis"),F=e=>j.get("/finance/reports/trial-balance",{params:e}),O=e=>j.get("/finance/reports/pnl",{params:e}),q=e=>j.get("/finance/reports/balance-sheet",{params:e}),E=e(e=>({currency:"KES",rateToBase:1,setCurrency:t=>e({currency:t}),setRate:t=>e({rateToBase:t})}));function K(){const{currency:e,rateToBase:t}=E();return s=>{if(null==s)return`${e} 0.00`;return function(e,t){if(null==e)return"";const s=t||"KES";try{return new Intl.NumberFormat("USD"===s?"en-US":"EUR"===s?"de-DE":"en-KE",{style:"currency",currency:s}).format(e)}catch(i){return`${s} ${e.toFixed(2)}`}}(s*t,e)}}const U={getKPIs:async()=>(await j.get("/dashboard/kpis")).data,getLowStock:async()=>(await j.get("/dashboard/low-stock")).data,getPOPipeline:async()=>(await j.get("/dashboard/po-pipeline")).data,getTechUsage:async()=>(await j.get("/dashboard/tech-usage")).data,getSupplierPerformance:async()=>(await j.get("/dashboard/supplier-performance")).data,getAlerts:async()=>(await j.get("/dashboard/alerts")).data,getActivity:async()=>(await j.get("/dashboard/activity")).data,getPredictiveInsights:async()=>(await j.get("/dashboard/insights")).data},$=()=>{const e=[(()=>{const{autoRefresh:e}=f();return t({queryKey:["dashboard","kpis"],queryFn:U.getKPIs,refetchInterval:!!e&&3e4,staleTime:15e3})})(),(()=>{const{autoRefresh:e}=f();return t({queryKey:["dashboard","low-stock"],queryFn:U.getLowStock,refetchInterval:!!e&&6e4,staleTime:3e4})})(),(()=>{const{autoRefresh:e}=f();return t({queryKey:["dashboard","po-pipeline"],queryFn:U.getPOPipeline,refetchInterval:!!e&&45e3,staleTime:2e4})})(),(()=>{const{autoRefresh:e,filters:s}=f();return t({queryKey:["dashboard","tech-usage",s.dateRange,s.technician],queryFn:U.getTechUsage,refetchInterval:!!e&&12e4,staleTime:6e4})})(),(()=>{const{autoRefresh:e,filters:s}=f();return t({queryKey:["dashboard","supplier-performance",s.dateRange,s.supplier],queryFn:U.getSupplierPerformance,refetchInterval:!!e&&9e4,staleTime:45e3})})(),(()=>{const{autoRefresh:e}=f();return t({queryKey:["dashboard","alerts"],queryFn:U.getAlerts,refetchInterval:!!e&&2e4,staleTime:1e4})})(),(()=>{const{autoRefresh:e,filters:s}=f();return t({queryKey:["dashboard","activity",s.dateRange],queryFn:U.getActivity,refetchInterval:!!e&&3e4,staleTime:15e3})})(),(()=>{const{autoRefresh:e}=f();return t({queryKey:["dashboard","predictive"],queryFn:U.getPredictiveInsights,refetchInterval:!!e&&3e5,staleTime:18e4})})()];return{isLoading:e.some(e=>e.isLoading),isError:e.some(e=>e.isError),isFetching:e.some(e=>e.isFetching),errors:e.filter(e=>e.error).map(e=>e.error),lastUpdated:Math.max(...e.map(e=>e.dataUpdatedAt).filter(Boolean))}},G=[{month:"Jan",sales:35e3},{month:"Feb",sales:42e3},{month:"Mar",sales:38e3},{month:"Apr",sales:45e3},{month:"May",sales:52e3},{month:"Jun",sales:48e3},{month:"Jul",sales:55e3},{month:"Aug",sales:62e3},{month:"Sep",sales:58e3},{month:"Oct",sales:65e3},{month:"Nov",sales:72e3},{month:"Dec",sales:68e3}],M=[{id:"#50285D",customer:"John Doe",avatar:"JD",destination:"USA",flag:"ğŸ‡ºğŸ‡¸",date:"Sep 28, 2024",cost:"$450.00",status:"Completed"},{id:"#50286A",customer:"Sarah Smith",avatar:"SS",destination:"UK",flag:"ğŸ‡¬ğŸ‡§",date:"Sep 27, 2024",cost:"$320.00",status:"Pending"},{id:"#50287B",customer:"Mike Johnson",avatar:"MJ",destination:"Canada",flag:"ğŸ‡¨ğŸ‡¦",date:"Sep 26, 2024",cost:"$890.00",status:"Completed"},{id:"#50288C",customer:"Emma Wilson",avatar:"EW",destination:"Australia",flag:"ğŸ‡¦ğŸ‡º",date:"Sep 25, 2024",cost:"$560.00",status:"Cancel"},{id:"#50289D",customer:"David Brown",avatar:"DB",destination:"Germany",flag:"ğŸ‡©ğŸ‡ª",date:"Sep 24, 2024",cost:"$720.00",status:"Pending"}],J=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{$();const[e,t]=s.useState("monthly"),a=K();return i.jsxs("div",{style:{padding:"24px"},children:[i.jsx("h1",{style:{marginBottom:"24px"},children:"Dashboard"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[i.jsxs("div",{className:"card",style:{padding:"20px"},children:[i.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Total Orders"}),i.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px"},children:"1,495"}),i.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"vs Last month"}),i.jsx("div",{style:{marginTop:"8px",fontSize:"14px",color:"#10b981",fontWeight:"600"},children:"â†— +5.6%"})]}),i.jsxs("div",{className:"card",style:{padding:"20px"},children:[i.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Total Delivery"}),i.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px"},children:"1,383"}),i.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"vs Last month"}),i.jsx("div",{style:{marginTop:"8px",fontSize:"14px",color:"#10b981",fontWeight:"600"},children:"â†— +5.6%"})]}),i.jsxs("div",{className:"card",style:{padding:"20px"},children:[i.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Total Shipments"}),i.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px"},children:"4,387"}),i.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"vs Last month"}),i.jsx("div",{style:{marginTop:"8px",fontSize:"14px",color:"#ef4444",fontWeight:"600"},children:"â†˜ -0.5%"})]}),i.jsxs("div",{className:"card",style:{padding:"20px"},children:[i.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Total Revenue"}),i.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px"},children:"$382,407"}),i.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"vs Last month"}),i.jsx("div",{style:{marginTop:"8px",fontSize:"14px",color:"#10b981",fontWeight:"600"},children:"â†— +2.5%"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"20px",marginBottom:"24px"},children:[i.jsxs("div",{className:"card",style:{padding:"20px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[i.jsxs("div",{children:[i.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold"},children:"Total Sales"}),i.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginTop:"4px"},children:[i.jsx("span",{style:{fontSize:"24px",fontWeight:"bold"},children:a(463602.39)}),i.jsx("span",{style:{fontSize:"14px",color:"#10b981",fontWeight:"600"},children:"â†— +18%"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{onClick:()=>t("weekly"),style:{padding:"6px 12px",fontSize:"12px",fontWeight:"500",border:"none",borderRadius:"6px",cursor:"pointer",background:"weekly"===e?"#3b82f6":"#f1f5f9",color:"weekly"===e?"white":"#64748b"},children:"Weekly"}),i.jsx("button",{onClick:()=>t("monthly"),style:{padding:"6px 12px",fontSize:"12px",fontWeight:"500",border:"none",borderRadius:"6px",cursor:"pointer",background:"monthly"===e?"#3b82f6":"#f1f5f9",color:"monthly"===e?"white":"#64748b"},children:"Monthly"}),i.jsx("button",{onClick:()=>t("yearly"),style:{padding:"6px 12px",fontSize:"12px",fontWeight:"500",border:"none",borderRadius:"6px",cursor:"pointer",background:"yearly"===e?"#3b82f6":"#f1f5f9",color:"yearly"===e?"white":"#64748b"},children:"Yearly"})]})]}),i.jsx(n,{width:"100%",height:300,children:i.jsxs(o,{data:G,children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"salesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),i.jsx(d,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),i.jsx(l,{dataKey:"month",stroke:"#9ca3af"}),i.jsx(c,{stroke:"#9ca3af"}),i.jsx(p,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:e=>[a(e),"Sales"]}),i.jsx(h,{type:"monotone",dataKey:"sales",stroke:"#3b82f6",strokeWidth:2,fill:"url(#salesGradient)"})]})})]}),i.jsxs("div",{className:"card",style:{padding:"20px"},children:[i.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"16px"},children:"Shipment Tracking"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#3b82f6"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"500"},children:"Order Placed"}),i.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Sep 25, 2024"})]}),i.jsx("span",{style:{color:"#3b82f6"},children:"âœ“"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#3b82f6"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"500"},children:"Preparing to ship"}),i.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Sep 26, 2024"})]}),i.jsx("span",{style:{color:"#3b82f6"},children:"âœ“"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#cbd5e1"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"500"},children:"Confirm Shipment"}),i.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Pending"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#cbd5e1"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"500"},children:"Picked up"}),i.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Pending"})]})]}),i.jsx("div",{style:{marginTop:"8px",padding:"12px",background:"#fef3c7",borderRadius:"8px",border:"1px solid #fde68a"},children:i.jsx("div",{style:{fontSize:"12px",color:"#92400e"},children:"âš ï¸ Shipment #50285D delayed by 1 day"})})]})]})]}),i.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden"},children:[i.jsx("div",{style:{padding:"20px",borderBottom:"1px solid #e5e7eb"},children:i.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold"},children:"Recent Products"})}),i.jsxs("table",{className:"table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Tracking ID"}),i.jsx("th",{children:"Customer"}),i.jsx("th",{children:"Destination"}),i.jsx("th",{children:"Date"}),i.jsx("th",{children:"Cost"}),i.jsx("th",{children:"Status"}),i.jsx("th",{children:"Action"})]})}),i.jsx("tbody",{children:M.map(e=>i.jsxs("tr",{children:[i.jsx("td",{children:e.id}),i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#3b82f6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:e.avatar}),i.jsx("span",{children:e.customer})]})}),i.jsxs("td",{children:[i.jsx("span",{style:{marginRight:"8px"},children:e.flag}),e.destination]}),i.jsx("td",{style:{color:"#64748b"},children:e.date}),i.jsx("td",{style:{fontWeight:"600"},children:a(Number(e.cost.replace(/[^0-9.-]+/g,"")))}),i.jsx("td",{children:i.jsx("span",{className:"status-pill "+("Completed"===e.status?"status-paid":"Pending"===e.status?"status-part-paid":"status-overdue"),children:e.status})}),i.jsx("td",{children:i.jsx("button",{style:{background:"transparent",border:"none",color:"#3b82f6",cursor:"pointer"},children:"ğŸ‘ï¸"})})]},e.id))})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{J as D,j as a,E as b,w as c,k as d,K as e,R as f,B as g,z as h,L as i,P as j,D as k,T as l,C as m,v as n,W as o,I as p,N as q,A as r,F as s,O as t,S as u,q as v,f as w,m as x};
