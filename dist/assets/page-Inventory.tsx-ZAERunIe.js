import{r as e,j as t}from"./vendor-react-BNOq7jpD.js";import{f as n,u as a,c as s,d as i}from"./page-Dashboard.tsx-L6v4uEnz.js";import"./vendor-CLxS_-q2.js";import"./vendor-state-CYpoUhNr.js";import"./vendor-tanstack-COsLTYUz.js";import"./vendor-charts-CFQ85YVe.js";function l({visible:n,onClose:a,onSave:s,initial:i}){const[l,o]=e.useState(""),[d,r]=e.useState(""),[c,u]=e.useState(0),[h,x]=e.useState("");return e.useEffect(()=>{i?(o(i.name),r(i.sku||""),u(i.quantity),x(i.location||"")):(o(""),r(""),u(0),x(""))},[i,n]),n?t.jsx("div",{className:"modal",children:t.jsxs("div",{className:"modal-content",children:[t.jsx("h3",{children:i?"Edit Item":"Add Item"}),t.jsx("label",{children:"Name"}),t.jsx("input",{value:l,onChange:e=>o(e.target.value)}),t.jsx("label",{children:"SKU"}),t.jsx("input",{value:d,onChange:e=>r(e.target.value)}),t.jsx("label",{children:"Quantity"}),t.jsx("input",{type:"number",value:c,onChange:e=>u(Number(e.target.value))}),t.jsx("label",{children:"Location"}),t.jsx("input",{value:h,onChange:e=>x(e.target.value)}),t.jsxs("div",{className:"modal-actions",children:[t.jsx("button",{onClick:a,className:"btn-secondary",children:"Cancel"}),t.jsx("button",{onClick:()=>s({name:l,sku:d||void 0,quantity:c,location:h||void 0},i?.id),children:"Save"})]})]})}):null}function o(){const[o,d]=e.useState([]),[r,c]=e.useState(!0),[u,h]=e.useState(!1),[x,j]=e.useState(null),[m,v]=e.useState(""),[p,g]=e.useState(""),[y,b]=e.useState(""),[S,f]=e.useState(1),[C]=e.useState(10),[k,N]=e.useState(0),q=()=>{c(!0),n({q:m||void 0,page:S,limit:C,sort:p||void 0,location:y||void 0}).then(e=>{const t=(e.data.items||[]).map(e=>({id:Number(e.id),name:e.name,sku:e.sku,quantity:Number(e.quantity),location:e.location}));d(t),N(e.data.total),c(!1)}).catch(()=>c(!1))};e.useEffect(()=>{q()},[S,m,p,y]);const I=e.useMemo(()=>{const e=new Set;return o.forEach(t=>t.location&&e.add(t.location)),Array.from(e)},[o]);return t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h1",{children:"Inventory Management"}),t.jsx("button",{onClick:()=>{j(null),h(!0)},children:"+ Add Item"})]}),t.jsx("div",{className:"card",style:{padding:"16px",marginBottom:"20px"},children:t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("input",{placeholder:"Search name or SKU",value:m,onChange:e=>v(e.target.value),style:{flex:"1",minWidth:"200px"}}),t.jsxs("select",{value:p,onChange:e=>g(e.target.value),children:[t.jsx("option",{value:"",children:"Sort by"}),t.jsx("option",{value:"name",children:"Name"}),t.jsx("option",{value:"quantity",children:"Quantity"}),t.jsx("option",{value:"location",children:"Location"})]}),t.jsxs("select",{value:y,onChange:e=>b(e.target.value),children:[t.jsx("option",{value:"",children:"All locations"}),I.map(e=>t.jsx("option",{value:e,children:e},e))]})]})}),r?t.jsx("div",{children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("table",{className:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"SKU"}),t.jsx("th",{children:"Quantity"}),t.jsx("th",{children:"Location"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:o.map(e=>t.jsxs("tr",{children:[t.jsx("td",{children:e.id}),t.jsx("td",{children:e.name}),t.jsx("td",{children:e.sku||"-"}),t.jsx("td",{children:t.jsx("span",{className:"status-pill "+(e.quantity<10?"status-overdue":e.quantity<50?"status-part-paid":"status-paid"),children:e.quantity})}),t.jsx("td",{children:e.location||"-"}),t.jsxs("td",{children:[t.jsx("button",{onClick:()=>{j(e),h(!0)},children:"Edit"})," ",t.jsx("button",{onClick:()=>{return t=e.id,void(confirm("Delete this item?")&&i(t).then(()=>q()));var t},style:{background:"#ef4444"},children:"Delete"})]})]},e.id))})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},children:[t.jsxs("div",{children:["Showing ",(S-1)*C+1," - ",Math.min(S*C,k)," of ",k]}),t.jsxs("div",{children:[t.jsx("button",{onClick:()=>f(e=>Math.max(1,e-1)),disabled:S<=1,children:"Previous"})," ",t.jsx("button",{onClick:()=>f(e=>e+1),disabled:S*C>=k,children:"Next"})]})]})]}),t.jsx(l,{visible:u,onClose:()=>{h(!1),j(null)},onSave:(e,t)=>{t?a(t,e).then(()=>{h(!1),j(null),q()}):s(e).then(()=>{h(!1),q()})},initial:x})]})}export{o as default};
