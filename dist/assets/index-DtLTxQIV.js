const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/page-Dashboard.tsx-B5pXQyi2.js","assets/vendor-react-BNOq7jpD.js","assets/vendor-CLxS_-q2.js","assets/vendor-BqTUOKJh.css","assets/vendor-state-CYpoUhNr.js","assets/vendor-tanstack-COsLTYUz.js","assets/vendor-charts-CFQ85YVe.js","assets/page-Inventory.tsx-DnaLPweh.js","assets/page-Suppliers.tsx-CgzYxgge.js","assets/page-SupplierDetail.tsx-DkxCzhg6.js","assets/vendor-framer-DlQFOBKq.js","assets/page-Marketplace.tsx-OBydN51V.js","assets/page-finance-CWQ9I6_J.js","assets/page-Settings.tsx-CpO960oK.js","assets/page-Profile.tsx-D8vMF3JW.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,R as r,c as n,g as s,h as o,N as a,L as i,O as l,i as c,Q as d,B as p}from"./vendor-react-BNOq7jpD.js";import{_ as u}from"./page-SupplierDetail.tsx-DkxCzhg6.js";import{w as x,a as h,b as g,x as m}from"./page-Dashboard.tsx-B5pXQyi2.js";import{A as f,m as j}from"./vendor-framer-DlQFOBKq.js";import{b as y}from"./vendor-tanstack-COsLTYUz.js";import"./vendor-CLxS_-q2.js";import"./vendor-state-CYpoUhNr.js";import"./vendor-charts-CFQ85YVe.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const b=e.createContext(void 0),_=({children:r})=>{const[n,s]=e.useState([]),o=e.useCallback(e=>{const t=Math.random().toString(36).slice(2),r=e.timeout??4e3;s(r=>[...r,{id:t,...e}]);r>0&&!("test"===import.meta?.env?.MODE)&&setTimeout(()=>{s(e=>e.filter(e=>e.id!==t))},r)},[]);return t.jsxs(b.Provider,{value:{push:o},children:[r,t.jsx("div",{style:{position:"fixed",top:16,right:16,display:"flex",flexDirection:"column",gap:8,zIndex:1e3},children:n.map(e=>{const r="error"===e.type?"#dc2626":"success"===e.type?"#16a34a":"#334155";return t.jsx("div",{style:{background:r,color:"#fff",padding:"8px 12px",borderRadius:6,minWidth:200,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",fontSize:13},children:e.text},e.id)})})]})};class v extends r.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){}render(){return this.state.error?t.jsx(S,{error:this.state.error,onRetry:()=>this.setState({error:null})}):this.props.children}}function S({error:e,onRetry:r}){const n=x(e=>e.resetLayout);return t.jsxs("div",{style:{padding:24},children:[t.jsx("h2",{style:{marginTop:0},children:"Something went wrong"}),t.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"#f8fafc",padding:12,borderRadius:8,border:"1px solid #e2e8f0"},children:e.message}),t.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[t.jsx("button",{className:"btn-secondary",onClick:()=>{try{n()}catch{}r(),location.reload()},children:"Reset dashboard & Reload"}),t.jsx("button",{onClick:()=>location.reload(),children:"Reload"})]})]})}const k=(()=>{const e="undefined"!=typeof localStorage?localStorage.getItem("theme"):null;return"dark"===e||"light"===e?e:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"})(),E=n((e,t)=>({theme:k,setTheme:t=>{e({theme:t}),"undefined"!=typeof document&&document.documentElement.classList.toggle("dark","dark"===t);try{localStorage.setItem("theme",t)}catch{}},toggle:()=>{const e="dark"===t().theme?"light":"dark";t().setTheme(e)}}));"undefined"!=typeof document&&document.documentElement.classList.toggle("dark","dark"===k);const R=n((e,t)=>({open:!1,setOpen:t=>e({open:t}),toggle:()=>e({open:!t().open})}));function I(){const{open:e,setOpen:n}=R(),[s,o]=r.useState(""),[a,i]=r.useState(null),[l,c]=r.useState(!1);return t.jsxs("div",{style:{position:"fixed",right:16,bottom:16,zIndex:50},children:[t.jsx("button",{className:"btn-secondary",onClick:()=>n(!e),children:e?"Close Assistant":"AI Assistant"}),t.jsx(f,{children:e&&t.jsx(j.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:12},style:{marginTop:8,width:360},children:t.jsxs("div",{className:"card",style:{background:"#fff",padding:12,borderRadius:8},children:[t.jsx("textarea",{value:s,onChange:e=>o(e.target.value),placeholder:"Ask about suppliers, items, POs...",style:{width:"100%",minHeight:80}}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:8},children:t.jsx("button",{onClick:async()=>{c(!0),i(null);try{const e=await h.post("/ai/assist",{q:s});i(e.data.answer||"No answer")}finally{c(!1)}},disabled:l,children:l?"Thinking…":"Ask"})}),a&&t.jsx("div",{style:{marginTop:8,fontSize:14},children:a})]})})})]})}function w({userName:e="Admin User",userEmail:n="admin@procurex.com",userRole:s="Administrator"}){const[o,a]=r.useState(!1),i=r.useRef(null);r.useEffect(()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&a(!1)};return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);return t.jsxs("div",{style:{position:"relative"},ref:i,children:[t.jsxs("button",{onClick:()=>a(!o),style:{display:"flex",alignItems:"center",gap:8,padding:"6px 12px",backgroundColor:"transparent",border:"1px solid #e2e8f0",borderRadius:8,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f8fafc",e.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor="#e2e8f0"},children:[t.jsx("div",{style:{width:32,height:32,borderRadius:"50%",backgroundColor:"#6366f1",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:600},children:(l=e,l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))}),t.jsxs("div",{style:{textAlign:"left",display:"flex",flexDirection:"column"},children:[t.jsx("span",{style:{fontSize:14,fontWeight:500,lineHeight:1.2},children:e}),t.jsx("span",{style:{fontSize:11,color:"#64748b",lineHeight:1.2},children:s})]}),t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:t.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"2",fill:"none"})})]}),o&&t.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,minWidth:220,backgroundColor:"#fff",border:"1px solid #e2e8f0",borderRadius:8,boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",zIndex:1e3,overflow:"hidden"},children:[t.jsxs("div",{style:{padding:16,borderBottom:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:4},children:e}),t.jsx("div",{style:{fontSize:12,color:"#64748b"},children:n})]}),t.jsxs("div",{style:{padding:8},children:[t.jsxs("a",{href:"/profile",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",color:"inherit",textDecoration:"none",borderRadius:4,fontSize:14,transition:"background-color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("span",{children:"👤"}),t.jsx("span",{children:"My Profile"})]}),t.jsxs("a",{href:"/settings",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",color:"inherit",textDecoration:"none",borderRadius:4,fontSize:14,transition:"background-color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("span",{children:"⚙️"}),t.jsx("span",{children:"Settings"})]}),t.jsxs("a",{href:"/help",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",color:"inherit",textDecoration:"none",borderRadius:4,fontSize:14,transition:"background-color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("span",{children:"❓"}),t.jsx("span",{children:"Help & Support"})]})]}),t.jsx("div",{style:{borderTop:"1px solid #e2e8f0",padding:8},children:t.jsxs("button",{onClick:()=>{alert("Logout functionality will be implemented")},style:{width:"100%",display:"flex",alignItems:"center",gap:8,padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#ef4444",borderRadius:4,fontSize:14,cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#fef2f2"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("span",{children:"🚪"}),t.jsx("span",{children:"Logout"})]})})]})]});var l}const C=["USD","EUR","GBP"];let T=null;async function D(){try{const t=await async function(e="KES",t=C){const r=t.join(","),n=`/api/fx/latest?base=${encodeURIComponent(e)}&symbols=${encodeURIComponent(r)}`;let s=0,o=null,a=null;for(;s<3;)try{const e=await fetch(n);if(!e.ok)throw new Error(`FX API returned ${e.status}`);a=await e.json();break}catch(i){o=i,s++,await new Promise(e=>setTimeout(e,200*s))}if(!a)throw o||new Error("Failed to fetch FX rates");return a.rates||{}}();try{localStorage.setItem("procurex_fx_rates",JSON.stringify(t))}catch(e){}const r=g.getState().currency;if("KES"===r)g.getState().setRate(1);else{const e=t[r];"number"==typeof e&&g.getState().setRate(e)}return t}catch(t){try{const e=localStorage.getItem("procurex_fx_rates");if(e){const t=JSON.parse(e),r=g.getState().currency;return"KES"===r?g.getState().setRate(1):t[r]&&g.getState().setRate(t[r]),t}}catch(e){}const r={USD:.0073,EUR:.0068,GBP:.0054},n=g.getState().currency;return"KES"===n?g.getState().setRate(1):r[n]&&g.getState().setRate(r[n]),r}}const L=[{value:"KES",label:"KES"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"}];function P(){const e=g(e=>e.currency),n=g(e=>e.setCurrency),s=g(e=>e.setRate),[o,a]=r.useState(!1);return r.useEffect(()=>{try{const e=localStorage.getItem("procurex_currency");e&&n(e)}catch(e){}return a(!0),D().finally(()=>a(!1)),function(e=36e5){T||(D(),T=window.setInterval(()=>{D()},e))}(36e5),()=>{T&&(clearInterval(T),T=null)}},[n]),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("select",{value:e,onChange:async function(e){const t=e.target.value;n(t),a(!0);try{const e=await D(),r="KES"===t?1:e[t]??1;s(r);try{localStorage.setItem("procurex_currency",t),localStorage.setItem("procurex_currency_rate",String(r))}catch{}}finally{a(!1)}},className:"btn-secondary",title:"Select display currency",children:L.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),o?t.jsx("span",{style:{fontSize:12,color:"#64748b"},children:"⏳"}):null]})}const z=r.lazy(()=>u(()=>import("./page-Dashboard.tsx-B5pXQyi2.js").then(e=>e.D),__vite__mapDeps([0,1,2,3,4,5,6]))),A=r.lazy(()=>u(()=>import("./page-Inventory.tsx-DnaLPweh.js"),__vite__mapDeps([7,1,2,3,4,5,0,6]))),O=r.lazy(()=>u(()=>import("./page-Suppliers.tsx-CgzYxgge.js"),__vite__mapDeps([8,1,2,3,4,5,0,6]))),N=r.lazy(()=>u(()=>import("./page-SupplierDetail.tsx-DkxCzhg6.js").then(e=>e.S),__vite__mapDeps([9,1,2,3,4,5,0,6,10]))),M=r.lazy(()=>u(()=>import("./page-Marketplace.tsx-OBydN51V.js"),__vite__mapDeps([11,1,2,3,4,5,0,6,10]))),V=r.lazy(()=>u(()=>import("./page-finance-CWQ9I6_J.js").then(e=>e.F),__vite__mapDeps([12,1,2,3,4,5,0,6]))),U=r.lazy(()=>u(()=>import("./page-finance-CWQ9I6_J.js").then(e=>e.B),__vite__mapDeps([12,1,2,3,4,5,0,6]))),B=r.lazy(()=>u(()=>import("./page-finance-CWQ9I6_J.js").then(e=>e.I),__vite__mapDeps([12,1,2,3,4,5,0,6]))),K=r.lazy(()=>u(()=>import("./page-finance-CWQ9I6_J.js").then(e=>e.a),__vite__mapDeps([12,1,2,3,4,5,0,6]))),W=r.lazy(()=>u(()=>import("./page-finance-CWQ9I6_J.js").then(e=>e.P),__vite__mapDeps([12,1,2,3,4,5,0,6]))),F=r.lazy(()=>u(()=>import("./page-finance-CWQ9I6_J.js").then(e=>e.E),__vite__mapDeps([12,1,2,3,4,5,0,6]))),G=r.lazy(()=>u(()=>import("./page-finance-CWQ9I6_J.js").then(e=>e.R),__vite__mapDeps([12,1,2,3,4,5,0,6]))),H=r.lazy(()=>u(()=>import("./page-finance-CWQ9I6_J.js").then(e=>e.S),__vite__mapDeps([12,1,2,3,4,5,0,6]))),X=r.lazy(()=>u(()=>import("./page-Settings.tsx-CpO960oK.js"),__vite__mapDeps([13,1,2,3,4,5,0,6]))),$=r.lazy(()=>u(()=>import("./page-Profile.tsx-D8vMF3JW.js"),__vite__mapDeps([14,1,2,3,4,5])));function q(){const{theme:e,toggle:r}=E(),{toggle:n}=R();return t.jsxs("header",{className:"header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("div",{children:"ProcureX Inventory"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx(P,{}),t.jsx("button",{className:"btn-secondary",onClick:r,title:`Switch to ${"dark"===e?"light":"dark"} mode`,children:"dark"===e?"🌙":"☀️"}),t.jsx("button",{className:"btn-secondary",onClick:n,title:"Open AI Assistant",children:"🤖"}),t.jsx(w,{userName:"Admin User",userEmail:"admin@procurex.com",userRole:"Administrator"})]})]})}function J(){return t.jsxs("div",{className:"app",children:[t.jsxs("aside",{className:"sidebar",children:[t.jsx("div",{className:"brand",children:"ProcureX"}),t.jsxs("nav",{children:[t.jsx(i,{to:"/",children:"Dashboard"}),t.jsx(i,{to:"/inventory",children:"Inventory"}),t.jsx(i,{to:"/suppliers",children:"Suppliers"}),t.jsx(i,{to:"/marketplace",children:"Marketplace"}),t.jsx(i,{to:"/finance/smart-books",children:"💰 Smart Books"}),t.jsx(i,{to:"/settings",children:"⚙️ Settings"})]})]}),t.jsxs("main",{className:"main",children:[t.jsx(q,{}),t.jsx("div",{className:"content",children:t.jsx(l,{})})]}),t.jsx(I,{})]})}function Q(){return t.jsx(a,{to:"/",replace:!0})}function Y(){function n(){const{push:t}=function(){const t=e.useContext(b);if(!t)throw new Error("useToast must be used within ToastProvider");return t}();return r.useEffect(()=>{m((e,r="error")=>t({type:r,text:e}))},[t]),null}return t.jsxs(_,{children:[t.jsx(n,{}),t.jsx(v,{children:t.jsx(r.Suspense,{fallback:t.jsx("div",{style:{padding:16},children:"Loading…"}),children:t.jsx(s,{children:t.jsxs(o,{element:t.jsx(J,{}),children:[t.jsx(o,{index:!0,element:t.jsx(z,{})}),t.jsx(o,{path:"inventory",element:t.jsx(A,{})}),t.jsx(o,{path:"suppliers",element:t.jsx(O,{})}),t.jsx(o,{path:"suppliers/:id",element:t.jsx(N,{})}),t.jsx(o,{path:"marketplace",element:t.jsx(M,{})}),t.jsx(o,{path:"finance/smart-books",element:t.jsx(V,{})}),t.jsx(o,{path:"finance/smart-books/banking",element:t.jsx(U,{})}),t.jsx(o,{path:"finance/smart-books/invoices",element:t.jsx(B,{})}),t.jsx(o,{path:"finance/smart-books/bills",element:t.jsx(K,{})}),t.jsx(o,{path:"finance/smart-books/payments",element:t.jsx(W,{})}),t.jsx(o,{path:"finance/smart-books/expenses",element:t.jsx(F,{})}),t.jsx(o,{path:"finance/smart-books/reports",element:t.jsx(G,{})}),t.jsx(o,{path:"finance/smart-books/settings",element:t.jsx(H,{})}),t.jsx(o,{path:"settings",element:t.jsx(X,{})}),t.jsx(o,{path:"profile",element:t.jsx($,{})}),t.jsx(o,{path:"*",element:t.jsx(Q,{})})]})})})})]})}const Z=new y;function ee(){return t.jsx(d,{client:Z,children:t.jsx(p,{children:t.jsx(Y,{})})})}c(document.getElementById("root")).render(t.jsx(r.StrictMode,{children:t.jsx(ee,{})}));
