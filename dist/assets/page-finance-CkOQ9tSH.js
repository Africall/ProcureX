import{u as e,j as n,L as t,b as s,R as a,d as i}from"./vendor-react-BNOq7jpD.js";import{a as l}from"./page-Dashboard.tsx-L6v4uEnz.js";const r=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{data:s,isLoading:a}=e({queryKey:["finance","kpis"],queryFn:()=>l.get("/finance/reports/kpis").then(e=>e.data)});if(a)return n.jsx("div",{children:"Loading..."});const i=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e);return n.jsxs("div",{style:{padding:"24px"},children:[n.jsxs("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h1",{children:"Smart Books - Finance Dashboard"}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx(t,{to:"/finance/smart-books/invoices",className:"btn-primary",children:"+ New Invoice"}),n.jsx(t,{to:"/finance/smart-books/bills",className:"btn-primary",children:"+ New Bill"}),n.jsx(t,{to:"/finance/smart-books/payments",className:"btn-primary",children:"+ Record Payment"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"32px"},children:[n.jsxs("div",{className:"card",style:{padding:"20px",background:"#f0f9ff",borderLeft:"2px solid #93c5fd"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Total Cash"}),n.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#1e293b"},children:i(s?.totalCash||0)}),n.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px"},children:"All accounts"})]}),n.jsxs("div",{className:"card",style:{padding:"20px",background:"#f0fdf4",borderLeft:"4px solid #22c55e"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Receivables"}),n.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#1e293b"},children:i(s?.totalReceivables||0)}),n.jsxs("div",{style:{fontSize:"12px",color:"#ef4444",marginTop:"8px"},children:[s?.overdueInvoices||0," overdue"]})]}),n.jsxs("div",{className:"card",style:{padding:"20px",background:"#fef2f2",borderLeft:"4px solid #ef4444"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Payables"}),n.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#1e293b"},children:i(s?.totalPayables||0)}),n.jsxs("div",{style:{fontSize:"12px",color:"#ef4444",marginTop:"8px"},children:[s?.overdueBills||0," overdue"]})]}),n.jsxs("div",{className:"card",style:{padding:"20px",background:"#faf5ff",borderLeft:"4px solid #a855f7"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Net Cashflow"}),n.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:s?.netCashflow&&s.netCashflow>=0?"#22c55e":"#ef4444"},children:i(s?.netCashflow||0)}),n.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px"},children:"Cash + AR - AP"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[n.jsxs(t,{to:"/finance/smart-books/banking",className:"card",style:{padding:"20px",textDecoration:"none",color:"inherit",display:"block"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"🏦"}),n.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Banking"}),n.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Manage accounts, reconcile"})]}),n.jsxs(t,{to:"/finance/smart-books/invoices",className:"card",style:{padding:"20px",textDecoration:"none",color:"inherit",display:"block"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"📄"}),n.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Invoices"}),n.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Create & send invoices"})]}),n.jsxs(t,{to:"/finance/smart-books/bills",className:"card",style:{padding:"20px",textDecoration:"none",color:"inherit",display:"block"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"📋"}),n.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Bills"}),n.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Manage vendor bills"})]}),n.jsxs(t,{to:"/finance/smart-books/payments",className:"card",style:{padding:"20px",textDecoration:"none",color:"inherit",display:"block"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"💳"}),n.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Payments"}),n.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Record payments"})]}),n.jsxs(t,{to:"/finance/smart-books/expenses",className:"card",style:{padding:"20px",textDecoration:"none",color:"inherit",display:"block"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"💰"}),n.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Expenses"}),n.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Track expenses"})]}),n.jsxs(t,{to:"/finance/smart-books/reports",className:"card",style:{padding:"20px",textDecoration:"none",color:"inherit",display:"block"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"📊"}),n.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Reports"}),n.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"P&L, Balance Sheet"})]}),n.jsxs(t,{to:"/finance/smart-books/settings",className:"card",style:{padding:"20px",textDecoration:"none",color:"inherit",display:"block"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"⚙️"}),n.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Settings"}),n.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Configure Smart Books"})]})]}),n.jsxs("div",{className:"card",style:{padding:"20px",background:"#fffbeb",borderLeft:"2px solid #fcd34d"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"bold"},children:"🎉 Welcome to Smart Books!"}),n.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",color:"#64748b"},children:"Your integrated finance & accounting solution. Smart Books is tightly integrated with Procurement, Vendors, Inventory, and Contracts for seamless financial management."}),n.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px",fontSize:"14px",color:"#64748b"},children:[n.jsx("li",{children:"Create invoices for customers and track receivables"}),n.jsx("li",{children:"Convert Purchase Orders directly into bills with one click"}),n.jsx("li",{children:"Record payments via M-PESA, Bank, Cash or Card"}),n.jsx("li",{children:"Run comprehensive financial reports (P&L, Balance Sheet, Aging)"}),n.jsx("li",{children:"Bank reconciliation with statement upload"})]})]})]})}},Symbol.toStringTag,{value:"Module"}));const d=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=s(),[r,d]=a.useState(!1),[c,o]=a.useState({name:"",type:"bank",currency:"KES",accountNumber:"",openingBalance:0}),{data:h,isLoading:x}=e({queryKey:["finance","accounts"],queryFn:()=>l.get("/finance/accounts").then(e=>e.data)}),{data:u}=e({queryKey:["finance","reconciliations"],queryFn:()=>l.get("/finance/reconciliations").then(e=>e.data),enabled:!1}),p=i({mutationFn:e=>l.post("/finance/accounts",e).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["finance","accounts"]}),d(!1),o({name:"",type:"bank",currency:"KES",accountNumber:"",openingBalance:0})}});return n.jsxs("div",{style:{padding:24},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[n.jsxs("div",{children:[n.jsx("h1",{children:"Banking & Cashflow"}),n.jsx("p",{style:{color:"#475569",marginTop:4},children:"Manage bank, M-PESA, and cash accounts. Monitor balances and start reconciliations."})]}),n.jsx("button",{className:"btn-primary",onClick:()=>d(!0),children:"+ Add Account"})]}),x?n.jsx("div",{children:"Loading accounts..."}):n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Account"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Currency"}),n.jsx("th",{children:"Balance"}),n.jsx("th",{children:"Opening Balance"}),n.jsx("th",{children:"Updated"})]})}),n.jsx("tbody",{children:h?.length?h.map(e=>n.jsxs("tr",{children:[n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:600},children:e.name}),e.accountNumber&&n.jsx("div",{style:{fontSize:12,color:"#64748b"},children:e.accountNumber})]}),n.jsx("td",{children:e.type.toUpperCase()}),n.jsx("td",{children:e.currency}),n.jsx("td",{style:{fontWeight:600},children:e.currentBalance.toLocaleString()}),n.jsx("td",{children:e.openingBalance.toLocaleString()}),n.jsx("td",{children:new Date(e.createdAt).toLocaleDateString()})]},e.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,style:{textAlign:"center",padding:20,color:"#64748b"},children:"No accounts yet. Add a bank, M-PESA till, or cash account to get started."})})})]}),r&&n.jsx("div",{className:"modal",children:n.jsxs("div",{className:"modal-content",children:[n.jsx("h2",{style:{marginBottom:16},children:"Add Finance Account"}),n.jsxs("form",{onSubmit:e=>{e.preventDefault(),p.mutate(c)},className:"form-grid",children:[n.jsxs("label",{children:[n.jsx("span",{children:"Name"}),n.jsx("input",{value:c.name,onChange:e=>o(n=>({...n,name:e.target.value})),required:!0})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Type"}),n.jsxs("select",{value:c.type,onChange:e=>o(n=>({...n,type:e.target.value})),children:[n.jsx("option",{value:"bank",children:"Bank"}),n.jsx("option",{value:"mpesa",children:"M-PESA"}),n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"card",children:"Card"})]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Currency"}),n.jsx("input",{value:c.currency,onChange:e=>o(n=>({...n,currency:e.target.value.toUpperCase()})),maxLength:3})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Account Number / Till"}),n.jsx("input",{value:c.accountNumber,onChange:e=>o(n=>({...n,accountNumber:e.target.value})),placeholder:"Optional"})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Opening Balance"}),n.jsx("input",{type:"number",value:c.openingBalance,onChange:e=>o(n=>({...n,openingBalance:Number(e.target.value)}))})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,gridColumn:"1 / -1"},children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:p.isPending,children:"Save Account"})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));const c=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=s(),[r,d]=a.useState(!1),[c,o]=a.useState({customerId:0,date:(new Date).toISOString().slice(0,10),dueDate:new Date(Date.now()+12096e5).toISOString().slice(0,10),items:[{description:"",quantity:1,unitPrice:0}],notes:""}),{data:h,isLoading:x}=e({queryKey:["finance","invoices"],queryFn:()=>l.get("/finance/invoices").then(e=>e.data)}),{data:u}=e({queryKey:["finance","customers"],queryFn:()=>l.get("/finance/customers").then(e=>e.data)}),{data:p}=e({queryKey:["finance","taxRates"],queryFn:()=>l.get("/finance/tax-rates").then(e=>e.data)}),j=i({mutationFn:()=>l.post("/finance/invoices",c).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["finance","invoices"]}),d(!1),o({customerId:0,date:(new Date).toISOString().slice(0,10),dueDate:new Date(Date.now()+12096e5).toISOString().slice(0,10),items:[{description:"",quantity:1,unitPrice:0}],notes:""})}}),m=(e,n,t)=>{o(s=>({...s,items:s.items.map((s,a)=>a===e?{...s,[n]:t}:s)}))},g=c.items.reduce((e,n)=>e+n.quantity*n.unitPrice,0),y=c.items.reduce((e,n)=>{if(!n.taxRateId)return e;const t=p?.find(e=>e.id===Number(n.taxRateId));return e+(t?n.quantity*n.unitPrice*(t.ratePercent/100):0)},0),b=g+y;return n.jsxs("div",{style:{padding:24},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[n.jsxs("div",{children:[n.jsx("h1",{children:"Invoices (Accounts Receivable)"}),n.jsx("p",{style:{color:"#475569",marginTop:4},children:"Create and track invoices, send PDF/emails, and accept M-PESA payments."})]}),n.jsx("button",{className:"btn-primary",onClick:()=>d(!0),children:"+ New Invoice"})]}),x?n.jsx("div",{children:"Loading invoices..."}):n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Number"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Due"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Balance"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:h?.length?h.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:e.number}),n.jsx("td",{children:e.customerName}),n.jsx("td",{children:new Date(e.date).toLocaleDateString()}),n.jsx("td",{children:new Date(e.dueDate).toLocaleDateString()}),n.jsx("td",{children:n.jsx("span",{className:`status-pill status-${e.status.replace(/_/g,"-")}`,children:e.status.toUpperCase()})}),n.jsx("td",{children:e.total.toLocaleString()}),n.jsx("td",{children:e.balance.toLocaleString()}),n.jsxs("td",{children:[n.jsx("button",{className:"btn-link",children:"Send"}),n.jsx("button",{className:"btn-link",children:"Record Payment"})]})]},e.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:8,style:{textAlign:"center",padding:24,color:"#64748b"},children:"No invoices yet. Create your first invoice to start tracking receivables."})})})]}),r&&n.jsx("div",{className:"modal",children:n.jsxs("div",{className:"modal-content",style:{maxWidth:900,width:"90vw"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h2",{children:"Create Invoice"}),n.jsx("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Close"})]}),n.jsxs("form",{onSubmit:e=>{e.preventDefault(),j.mutate()},className:"form-grid",children:[n.jsxs("label",{children:[n.jsx("span",{children:"Customer"}),n.jsxs("select",{value:c.customerId,onChange:e=>o(n=>({...n,customerId:Number(e.target.value)})),required:!0,children:[n.jsx("option",{value:0,disabled:!0,children:"Select customer"}),u?.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Invoice Date"}),n.jsx("input",{type:"date",value:c.date,onChange:e=>o(n=>({...n,date:e.target.value})),required:!0})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Due Date"}),n.jsx("input",{type:"date",value:c.dueDate,onChange:e=>o(n=>({...n,dueDate:e.target.value})),required:!0})]}),n.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:12},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[n.jsx("h3",{style:{margin:0},children:"Invoice Items"}),n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{o(e=>({...e,items:[...e.items,{description:"",quantity:1,unitPrice:0}]}))},children:"+ Add Line"})]}),n.jsx("div",{className:"card",style:{padding:12},children:c.items.map((e,t)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr repeat(4, 1fr)",gap:12,marginBottom:12},children:[n.jsx("input",{placeholder:"Description",value:e.description,onChange:e=>m(t,"description",e.target.value),required:!0}),n.jsx("input",{type:"number",min:1,value:e.quantity,onChange:e=>m(t,"quantity",Number(e.target.value))}),n.jsx("input",{type:"number",min:0,step:"0.01",value:e.unitPrice,onChange:e=>m(t,"unitPrice",Number(e.target.value))}),n.jsxs("select",{value:e.taxRateId||"",onChange:e=>m(t,"taxRateId",e.target.value?Number(e.target.value):void 0),children:[n.jsx("option",{value:"",children:"No Tax"}),p?.map(e=>n.jsxs("option",{value:e.id,children:[e.name," (",e.ratePercent,"%)"]},e.id))]}),n.jsx("div",{style:{alignSelf:"center",fontWeight:600,textAlign:"right"},children:(e.quantity*e.unitPrice).toLocaleString()})]},t))})]}),n.jsxs("label",{style:{gridColumn:"1 / -1"},children:[n.jsx("span",{children:"Notes (optional)"}),n.jsx("textarea",{value:c.notes,onChange:e=>o(n=>({...n,notes:e.target.value})),rows:3})]}),n.jsxs("div",{style:{gridColumn:"1 / -1",background:"#f8fafc",borderRadius:8,padding:16},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[n.jsx("span",{children:"Subtotal"}),n.jsx("span",{children:g.toLocaleString()})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[n.jsx("span",{children:"Tax"}),n.jsx("span",{children:y.toLocaleString()})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:700},children:[n.jsx("span",{children:"Total"}),n.jsx("span",{children:b.toLocaleString()})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,gridColumn:"1 / -1"},children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:j.isPending||0===c.customerId,children:"Save Invoice"})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));const o=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=s(),[r,d]=a.useState(!1),[c,o]=a.useState({vendorId:0,billDate:(new Date).toISOString().slice(0,10),dueDate:new Date(Date.now()+2592e6).toISOString().slice(0,10),items:[{description:"",quantity:1,unitPrice:0}],notes:""}),{data:h,isLoading:x}=e({queryKey:["finance","bills"],queryFn:()=>l.get("/finance/bills").then(e=>e.data)}),{data:u}=e({queryKey:["suppliers"],queryFn:()=>l.get("/suppliers").then(e=>e.data)}),{data:p}=e({queryKey:["finance","taxRates"],queryFn:()=>l.get("/finance/tax-rates").then(e=>e.data)}),j=i({mutationFn:()=>l.post("/finance/bills",c).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["finance","bills"]}),d(!1),o({vendorId:0,billDate:(new Date).toISOString().slice(0,10),dueDate:new Date(Date.now()+2592e6).toISOString().slice(0,10),items:[{description:"",quantity:1,unitPrice:0}],notes:""})}}),m=(e,n,t)=>{o(s=>({...s,items:s.items.map((s,a)=>a===e?{...s,[n]:t}:s)}))},g=c.items.reduce((e,n)=>e+n.quantity*n.unitPrice,0),y=c.items.reduce((e,n)=>{if(!n.taxRateId)return e;const t=p?.find(e=>e.id===Number(n.taxRateId));return e+(t?n.quantity*n.unitPrice*(t.ratePercent/100):0)},0),b=g+y;return n.jsxs("div",{style:{padding:24},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[n.jsxs("div",{children:[n.jsx("h1",{children:"Vendor Bills (Accounts Payable)"}),n.jsx("p",{style:{color:"#475569",marginTop:4},children:"Convert approved POs/GRNs into bills, track approvals, and schedule payments."})]}),n.jsxs("div",{style:{display:"flex",gap:12},children:[n.jsx("button",{className:"btn-secondary",children:"Convert PO → Bill"}),n.jsx("button",{className:"btn-secondary",children:"Create Bill from GRN"}),n.jsx("button",{className:"btn-primary",onClick:()=>d(!0),children:"+ New Bill"})]})]}),x?n.jsx("div",{children:"Loading bills..."}):n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Number"}),n.jsx("th",{children:"Vendor"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Bill Date"}),n.jsx("th",{children:"Due"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:"Balance"}),n.jsx("th",{children:"PO/GRN"})]})}),n.jsx("tbody",{children:h?.length?h.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:e.number}),n.jsx("td",{children:e.vendorName}),n.jsx("td",{children:n.jsx("span",{className:`status-pill status-${e.status.replace(/_/g,"-")}`,children:e.status.toUpperCase()})}),n.jsx("td",{children:new Date(e.billDate).toLocaleDateString()}),n.jsx("td",{children:new Date(e.dueDate).toLocaleDateString()}),n.jsx("td",{children:e.total.toLocaleString()}),n.jsx("td",{children:e.balance.toLocaleString()}),n.jsx("td",{children:e.poId?`PO #${e.poId}`:"-"})]},e.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:8,style:{textAlign:"center",padding:24},children:"No bills recorded yet."})})})]}),r&&n.jsx("div",{className:"modal",children:n.jsxs("div",{className:"modal-content",style:{maxWidth:900,width:"90vw"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h2",{children:"Create Bill"}),n.jsx("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Close"})]}),n.jsxs("form",{onSubmit:e=>{e.preventDefault(),j.mutate()},className:"form-grid",children:[n.jsxs("label",{children:[n.jsx("span",{children:"Vendor"}),n.jsxs("select",{value:c.vendorId,onChange:e=>o(n=>({...n,vendorId:Number(e.target.value)})),required:!0,children:[n.jsx("option",{value:0,disabled:!0,children:"Select vendor"}),u?.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Bill Date"}),n.jsx("input",{type:"date",value:c.billDate,onChange:e=>o(n=>({...n,billDate:e.target.value})),required:!0})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Due Date"}),n.jsx("input",{type:"date",value:c.dueDate,onChange:e=>o(n=>({...n,dueDate:e.target.value})),required:!0})]}),n.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:12},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[n.jsx("h3",{style:{margin:0},children:"Bill Items"}),n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(e=>({...e,items:[...e.items,{description:"",quantity:1,unitPrice:0}]})),children:"+ Add Line"})]}),n.jsx("div",{className:"card",style:{padding:12},children:c.items.map((e,t)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr repeat(4, 1fr)",gap:12,marginBottom:12},children:[n.jsx("input",{placeholder:"Description",value:e.description,onChange:e=>m(t,"description",e.target.value),required:!0}),n.jsx("input",{type:"number",min:1,value:e.quantity,onChange:e=>m(t,"quantity",Number(e.target.value))}),n.jsx("input",{type:"number",min:0,step:"0.01",value:e.unitPrice,onChange:e=>m(t,"unitPrice",Number(e.target.value))}),n.jsxs("select",{value:e.taxRateId||"",onChange:e=>m(t,"taxRateId",e.target.value?Number(e.target.value):void 0),children:[n.jsx("option",{value:"",children:"No Tax"}),p?.map(e=>n.jsxs("option",{value:e.id,children:[e.name," (",e.ratePercent,"%)"]},e.id))]}),n.jsx("div",{style:{alignSelf:"center",fontWeight:600,textAlign:"right"},children:(e.quantity*e.unitPrice).toLocaleString()})]},t))})]}),n.jsxs("label",{style:{gridColumn:"1 / -1"},children:[n.jsx("span",{children:"Notes (optional)"}),n.jsx("textarea",{value:c.notes,onChange:e=>o(n=>({...n,notes:e.target.value})),rows:3})]}),n.jsxs("div",{style:{gridColumn:"1 / -1",background:"#f8fafc",borderRadius:8,padding:16},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[n.jsx("span",{children:"Subtotal"}),n.jsx("span",{children:g.toLocaleString()})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[n.jsx("span",{children:"Tax"}),n.jsx("span",{children:y.toLocaleString()})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:700},children:[n.jsx("span",{children:"Total"}),n.jsx("span",{children:b.toLocaleString()})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,gridColumn:"1 / -1"},children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:j.isPending||0===c.vendorId,children:"Save Bill"})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));const h=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=s(),[r,d]=a.useState(!1),[c,o]=a.useState("customer"),[h,x]=a.useState(0),[u,p]=a.useState(0),[j,m]=a.useState(),[g,y]=a.useState("mpesa"),[b,f]=a.useState(""),{data:v,isLoading:S}=e({queryKey:["finance","payments"],queryFn:()=>l.get("/finance/payments").then(e=>e.data)}),{data:C}=e({queryKey:["finance","invoices","open"],queryFn:()=>l.get("/finance/invoices").then(e=>e.data.filter(e=>e.balance>0))}),{data:N}=e({queryKey:["finance","bills","open"],queryFn:()=>l.get("/finance/bills").then(e=>e.data.filter(e=>e.balance>0))}),{data:P}=e({queryKey:["finance","accounts"],queryFn:()=>l.get("/finance/accounts").then(e=>e.data)}),D=i({mutationFn:()=>!j||0===u||h<=0?Promise.reject(new Error("Provide all required payment details")):l.post("/finance/payments",{payeeType:c,payeeId:void 0,payeeName:b,method:g,amount:h,accountId:u,relatedInvoiceId:"customer"===c?j:void 0,relatedBillId:"vendor"===c?j:void 0}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["finance","payments"]}),t.invalidateQueries({queryKey:["finance","invoices"]}),t.invalidateQueries({queryKey:["finance","bills"]}),d(!1),x(0),p(0),m(void 0),f("")}}),k=a.useCallback((e,n="KES")=>new Intl.NumberFormat("en-KE",{style:"currency",currency:n}).format(e),[]);return n.jsxs("div",{style:{padding:24},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[n.jsxs("div",{children:[n.jsx("h1",{children:"Payments"}),n.jsx("p",{style:{color:"#475569",marginTop:4},children:"Record payments for invoices and bills. Supports M-PESA STK, bank transfers, cash, or card."})]}),n.jsx("button",{className:"btn-primary",onClick:()=>d(!0),children:"+ Record Payment"})]}),S?n.jsx("div",{children:"Loading payments..."}):n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Payee"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Method"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Linked Document"})]})}),n.jsx("tbody",{children:v?.length?v.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:new Date(e.date).toLocaleDateString()}),n.jsx("td",{children:e.payeeName}),n.jsx("td",{children:e.payeeType.toUpperCase()}),n.jsx("td",{children:e.method.toUpperCase()}),n.jsx("td",{children:k(e.amount,e.currency)}),n.jsx("td",{children:e.reference}),n.jsx("td",{children:e.relatedInvoiceId?`Invoice #${e.relatedInvoiceId}`:e.relatedBillId?`Bill #${e.relatedBillId}`:"-"})]},e.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,style:{textAlign:"center",padding:24},children:"No payments recorded yet."})})})]}),r&&n.jsx("div",{className:"modal",children:n.jsxs("div",{className:"modal-content",children:[n.jsx("h2",{children:"Record Payment"}),n.jsxs("form",{onSubmit:e=>{e.preventDefault(),D.mutate()},className:"form-grid",children:[n.jsxs("label",{children:[n.jsx("span",{children:"Payee Type"}),n.jsxs("select",{value:c,onChange:e=>{o(e.target.value),m(void 0)},children:[n.jsx("option",{value:"customer",children:"Customer (Invoice)"}),n.jsx("option",{value:"vendor",children:"Vendor (Bill)"})]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"customer"===c?"Invoice":"Bill"}),n.jsxs("select",{value:j||"",onChange:e=>m(e.target.value?Number(e.target.value):void 0),required:!0,children:[n.jsx("option",{value:"",disabled:!0,children:"Select open document"}),"customer"===c?(C??[]).map(e=>n.jsx("option",{value:e.id,children:`Invoice ${e.number} • ${e.customerName} • Balance ${e.balance.toLocaleString()}`},e.id)):(N??[]).map(e=>n.jsx("option",{value:e.id,children:`Bill ${e.number} • ${e.vendorName} • Balance ${e.balance.toLocaleString()}`},e.id))]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Payee Name"}),n.jsx("input",{value:b,onChange:e=>f(e.target.value),placeholder:"Optional override"})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Payment Method"}),n.jsxs("select",{value:g,onChange:e=>y(e.target.value),children:[n.jsx("option",{value:"mpesa",children:"M-PESA STK"}),n.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"cheque",children:"Cheque"})]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Amount"}),n.jsx("input",{type:"number",min:0,step:"0.01",value:h,onChange:e=>x(Number(e.target.value)),required:!0})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Deposit To Account"}),n.jsxs("select",{value:u,onChange:e=>p(Number(e.target.value)),required:!0,children:[n.jsx("option",{value:0,disabled:!0,children:"Select account"}),P?.map(e=>n.jsxs("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,gridColumn:"1 / -1"},children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:D.isPending||!j||0===u||h<=0,children:"Record Payment"})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));const x=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=s(),[r,d]=a.useState(!1),[c,o]=a.useState(""),[h,x]=a.useState(""),[u,p]=a.useState(""),[j,m]=a.useState(0),[g,y]=a.useState(""),[b,f]=a.useState(""),[v,S]=a.useState(()=>(new Date).toISOString().slice(0,10)),{data:C,isLoading:N}=e({queryKey:["finance","expenses"],queryFn:()=>l.get("/finance/expenses").then(e=>e.data)}),{data:P}=e({queryKey:["vendors"],queryFn:()=>l.get("/suppliers").then(e=>e.data)}),{data:D}=e({queryKey:["finance","accounts"],queryFn:()=>l.get("/finance/accounts").then(e=>e.data)}),{data:k}=e({queryKey:["finance","chart-of-accounts"],queryFn:()=>l.get("/finance/chart-of-accounts").then(e=>e.data)}),B=a.useMemo(()=>(k??[]).filter(e=>"expense"===e.type),[k]);a.useEffect(()=>{if(h){const e=P?.find(e=>e.id===h);e&&p(e.name)}},[h,P]);const q=i({mutationFn:()=>""===c||""===g?Promise.reject(new Error("Select category and account")):l.post("/finance/expenses",{payee:u||P?.find(e=>e.id===h)?.name||"Miscellaneous",categoryAccountId:Number(c),amount:Number(j),date:v,description:b,accountId:Number(g)}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["finance","expenses"]}),d(!1),o(""),x(""),p(""),m(0),y(""),f("")}}),w=a.useCallback(e=>B.find(n=>n.id===e)?.name||"Expense",[B]);return n.jsxs("div",{style:{padding:24},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[n.jsxs("div",{children:[n.jsx("h1",{children:"Expenses"}),n.jsx("p",{style:{color:"#475569",marginTop:4},children:"Track operating expenses, assign categories, and sync them with your general ledger."})]}),n.jsx("button",{className:"btn-primary",onClick:()=>d(!0),children:"+ Capture Expense"})]}),N?n.jsx("div",{children:"Loading expenses..."}):n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Payee"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Description"})]})}),n.jsx("tbody",{children:C?.length?C.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:new Date(e.date).toLocaleDateString()}),n.jsx("td",{children:e.payee||"-"}),n.jsx("td",{children:e.amount.toLocaleString("en-KE",{style:"currency",currency:"KES"})}),n.jsx("td",{children:w(e.categoryAccountId)}),n.jsx("td",{style:{textTransform:"capitalize"},children:e.status}),n.jsx("td",{children:e.description})]},e.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,style:{textAlign:"center",padding:24},children:"No expenses captured yet."})})})]}),r&&n.jsx("div",{className:"modal",children:n.jsxs("div",{className:"modal-content",children:[n.jsx("h2",{children:"Capture Expense"}),n.jsxs("form",{onSubmit:e=>{e.preventDefault(),q.mutate()},className:"form-grid",children:[n.jsxs("label",{children:[n.jsx("span",{children:"Payee"}),n.jsx("input",{value:u,onChange:e=>p(e.target.value),placeholder:"Name of vendor or recipient",required:!0})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Linked Vendor"}),n.jsxs("select",{value:h,onChange:e=>x(e.target.value?Number(e.target.value):""),children:[n.jsx("option",{value:"",children:"No vendor"}),P?.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Category (Expense Account)"}),n.jsxs("select",{value:c,onChange:e=>o(e.target.value?Number(e.target.value):""),required:!0,children:[n.jsx("option",{value:"",disabled:!0,children:"Select account"}),B.map(e=>n.jsxs("option",{value:e.id,children:[e.code," • ",e.name]},e.id))]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Amount"}),n.jsx("input",{type:"number",min:0,step:"0.01",value:j,onChange:e=>m(Number(e.target.value)),required:!0})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Paid From Account"}),n.jsxs("select",{value:g,onChange:e=>y(e.target.value?Number(e.target.value):""),required:!0,children:[n.jsx("option",{value:"",disabled:!0,children:"Select account"}),D?.map(e=>n.jsxs("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))]})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Date"}),n.jsx("input",{type:"date",value:v,onChange:e=>S(e.target.value),required:!0})]}),n.jsxs("label",{style:{gridColumn:"1 / -1"},children:[n.jsx("span",{children:"Description"}),n.jsx("textarea",{value:b,onChange:e=>f(e.target.value),placeholder:"What was this expense for?",rows:3})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,gridColumn:"1 / -1"},children:[n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary",disabled:q.isPending||!c||!u,children:"Save Expense"})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));const u=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[t,s]=a.useState(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),1).toISOString().slice(0,10)}),[i,r]=a.useState(()=>(new Date).toISOString().slice(0,10)),{data:d}=e({queryKey:["finance","reports","kpis"],queryFn:()=>l.get("/finance/reports/kpis").then(e=>e.data)}),{data:c,refetch:o,isFetching:h}=e({queryKey:["finance","reports","pl",t,i],queryFn:()=>l.get("/finance/reports/profit-loss",{params:{startDate:t,endDate:i}}).then(e=>e.data)}),{data:x}=e({queryKey:["finance","reports","ar-aging"],queryFn:()=>l.get("/finance/reports/ar-aging").then(e=>e.data)}),{data:u}=e({queryKey:["finance","reports","ap-aging"],queryFn:()=>l.get("/finance/reports/ap-aging").then(e=>e.data)}),p=e=>e?.toLocaleString("en-KE",{style:"currency",currency:"KES"})??"KES 0.00";return n.jsxs("div",{style:{padding:24},children:[n.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[n.jsxs("div",{children:[n.jsx("h1",{children:"Financial Reports"}),n.jsx("p",{style:{color:"#475569",marginTop:4},children:"Live KPIs, Profit & Loss snapshots, and receivables/payables aging to keep cash flow in check."})]}),n.jsxs("div",{style:{display:"flex",gap:12},children:[n.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:12,color:"#475569"},children:["Start Date",n.jsx("input",{type:"date",value:t,onChange:e=>s(e.target.value)})]}),n.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:12,color:"#475569"},children:["End Date",n.jsx("input",{type:"date",value:i,onChange:e=>r(e.target.value)})]}),n.jsx("button",{className:"btn-secondary",onClick:()=>o(),disabled:h,children:"Refresh"})]})]}),n.jsx("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:16,marginBottom:32},children:[{label:"Total Receivables",value:p(d?.totalReceivables),highlight:"#0ea5e9"},{label:"Total Payables",value:p(d?.totalPayables),highlight:"#ef4444"},{label:"Cash on Hand",value:p(d?.totalCash),highlight:"#22c55e"},{label:"Net Cashflow",value:p(d?.netCashflow),highlight:"#8b5cf6"}].map(e=>n.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:20,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.08)",borderTop:`4px solid ${e.highlight}`},children:[n.jsx("p",{style:{color:"#475569",fontSize:14,marginBottom:8},children:e.label}),n.jsx("h2",{style:{fontSize:24,fontWeight:600},children:e.value})]},e.label))}),n.jsxs("section",{style:{background:"#fff",borderRadius:12,padding:24,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.08)",marginBottom:32},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[n.jsx("h2",{children:"Profit & Loss"}),h&&n.jsx("span",{style:{color:"#6366f1"},children:"Refreshing…"})]}),n.jsx("table",{className:"table",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Revenue"}),n.jsx("td",{children:p(c?.revenue)}),n.jsx("td",{})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Cost of Goods Sold"}),n.jsx("td",{children:p(c?.costOfGoodsSold)}),n.jsx("td",{})]}),n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:"Gross Profit"})}),n.jsx("td",{children:n.jsx("strong",{children:p(c?.grossProfit)})}),n.jsx("td",{children:"number"==typeof c?.grossProfitMargin?`${c.grossProfitMargin.toFixed(1)}% margin`:""})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Operating Expenses"}),n.jsx("td",{children:p(c?.operatingExpenses)}),n.jsx("td",{})]}),n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:"Net Profit"})}),n.jsx("td",{children:n.jsx("strong",{children:p(c?.netProfit)})}),n.jsx("td",{children:"number"==typeof c?.netProfitMargin?`${c.netProfitMargin.toFixed(1)}% margin`:""})]})]})})]}),n.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:24},children:[n.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:24,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.08)"},children:[n.jsx("h2",{children:"Accounts Receivable Aging"}),n.jsx("table",{className:"table",style:{marginTop:16},children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Current"}),n.jsx("td",{children:p(x?.current)})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"1 - 30 Days"}),n.jsx("td",{children:p(x?.days30)})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"31 - 60 Days"}),n.jsx("td",{children:p(x?.days60)})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"61 - 90 Days"}),n.jsx("td",{children:p(x?.days90)})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"90+ Days"}),n.jsx("td",{children:p(x?.days90Plus)})]})]})})]}),n.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:24,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.08)"},children:[n.jsx("h2",{children:"Accounts Payable Aging"}),n.jsx("table",{className:"table",style:{marginTop:16},children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Current"}),n.jsx("td",{children:p(u?.current)})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"1 - 30 Days"}),n.jsx("td",{children:p(u?.days30)})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"31 - 60 Days"}),n.jsx("td",{children:p(u?.days60)})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"61 - 90 Days"}),n.jsx("td",{children:p(u?.days90)})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"90+ Days"}),n.jsx("td",{children:p(u?.days90Plus)})]})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"}));const p=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=s(),{data:r}=e({queryKey:["finance","settings"],queryFn:()=>l.get("/finance/settings").then(e=>e.data)}),[d,c]=a.useState(null);a.useEffect(()=>{r&&c(r)},[r]);const o=i({mutationFn:e=>l.put("/finance/settings",e).then(e=>e.data),onSuccess:e=>{c(e),t.invalidateQueries({queryKey:["finance","settings"]})}}),h=(e,n)=>{c(t=>t?{...t,[e]:n}:t)};return d?n.jsxs("div",{style:{padding:24,display:"grid",gap:24},children:[n.jsxs("header",{children:[n.jsx("h1",{children:"Finance Settings"}),n.jsx("p",{style:{color:"#475569",marginTop:4},children:"Configure Smart Books defaults, M-PESA integration, and SMTP for statement delivery."})]}),n.jsxs("section",{style:{background:"#fff",borderRadius:12,padding:24,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.08)"},children:[n.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Company Profile"}),n.jsx("p",{style:{color:"#64748b",fontSize:14},children:"This information appears on invoices, bills, and statements."})]}),n.jsx("button",{className:"btn-primary",onClick:()=>o.mutate(d),disabled:o.isPending,children:"Save"})]}),n.jsxs("div",{className:"form-grid",style:{marginTop:24},children:[n.jsxs("label",{children:[n.jsx("span",{children:"Company Name"}),n.jsx("input",{value:d.companyName,onChange:e=>h("companyName",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Company Email"}),n.jsx("input",{value:d.companyEmail||"",onChange:e=>h("companyEmail",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Company Phone"}),n.jsx("input",{value:d.companyPhone||"",onChange:e=>h("companyPhone",e.target.value)})]}),n.jsxs("label",{style:{gridColumn:"1 / -1"},children:[n.jsx("span",{children:"Address"}),n.jsx("textarea",{value:d.companyAddress||"",onChange:e=>h("companyAddress",e.target.value),rows:2})]})]})]}),n.jsxs("section",{style:{background:"#fff",borderRadius:12,padding:24,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.08)"},children:[n.jsx("h2",{children:"Numbering & Defaults"}),n.jsxs("div",{className:"form-grid",style:{marginTop:16},children:[n.jsxs("label",{children:[n.jsx("span",{children:"Base Currency"}),n.jsx("input",{value:d.baseCurrency,maxLength:3,onChange:e=>h("baseCurrency",e.target.value.toUpperCase())})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Default Payment Terms"}),n.jsx("input",{value:d.defaultPaymentTerms,onChange:e=>h("defaultPaymentTerms",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Fiscal Year Start (MM-DD)"}),n.jsx("input",{value:d.fiscalYearStart,onChange:e=>h("fiscalYearStart",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Invoice Number Format"}),n.jsx("input",{value:d.invoiceNumberFormat,onChange:e=>h("invoiceNumberFormat",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Bill Number Format"}),n.jsx("input",{value:d.billNumberFormat,onChange:e=>h("billNumberFormat",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Payment Number Format"}),n.jsx("input",{value:d.paymentNumberFormat,onChange:e=>h("paymentNumberFormat",e.target.value)})]})]})]}),n.jsxs("section",{style:{background:"#fff",borderRadius:12,padding:24,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.08)"},children:[n.jsx("h2",{children:"M-PESA STK Push"}),n.jsx("p",{style:{color:"#64748b",fontSize:14,marginBottom:16},children:"These credentials enable real-time push-to-pay for vendor bills and invoice collections."}),n.jsxs("div",{className:"form-grid",children:[n.jsxs("label",{children:[n.jsx("span",{children:"Consumer Key"}),n.jsx("input",{value:d.mpesaConsumerKey||"",onChange:e=>h("mpesaConsumerKey",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Consumer Secret"}),n.jsx("input",{value:d.mpesaConsumerSecret||"",onChange:e=>h("mpesaConsumerSecret",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Shortcode"}),n.jsx("input",{value:d.mpesaShortcode||"",onChange:e=>h("mpesaShortcode",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Passkey"}),n.jsx("input",{value:d.mpesaPasskey||"",onChange:e=>h("mpesaPasskey",e.target.value)})]})]})]}),n.jsxs("section",{style:{background:"#fff",borderRadius:12,padding:24,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.08)"},children:[n.jsx("h2",{children:"SMTP Email"}),n.jsx("p",{style:{color:"#64748b",fontSize:14,marginBottom:16},children:"Send invoices, receipts, and statements directly from ProcureX."}),n.jsxs("div",{className:"form-grid",children:[n.jsxs("label",{children:[n.jsx("span",{children:"Host"}),n.jsx("input",{value:d.smtpHost||"",onChange:e=>h("smtpHost",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"Port"}),n.jsx("input",{type:"number",value:d.smtpPort||"",onChange:e=>h("smtpPort",e.target.value?Number(e.target.value):void 0)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"SMTP User"}),n.jsx("input",{value:d.smtpUser||"",onChange:e=>h("smtpUser",e.target.value)})]}),n.jsxs("label",{children:[n.jsx("span",{children:"SMTP Password"}),n.jsx("input",{type:"password",value:d.smtpPassword||"",onChange:e=>h("smtpPassword",e.target.value)})]})]})]}),o.isSuccess&&d&&n.jsxs("div",{style:{background:"#ecfdf5",color:"#047857",padding:12,borderRadius:8},children:["Settings saved. Updated at ",new Date(d.updatedAt).toLocaleString(),"."]})]}):n.jsx("div",{style:{padding:24},children:"Loading settings…"})}},Symbol.toStringTag,{value:"Module"}));export{d as B,x as E,r as F,c as I,h as P,u as R,p as S,o as a};
